<!DOCTYPE html>
<html lang="en" data-copyright-protected="true" data-author="Ervin Remus Radosavlevici">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Ervin Remus Radosavlevici">
    <meta name="copyright" content="© 2025 Ervin Remus Radosavlevici (ervin210@icloud.com). All Rights Reserved Globally.">
    <title>Panou de Administrare - Quantum Computing Educational Platform</title>
    
    <!-- Global CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    
    <!-- Custom Admin Dashboard CSS -->
    <style>
        .admin-container {
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #dee2e6;
        }
        
        .admin-title {
            font-size: 24px;
            margin: 0;
            color: #343a40;
        }
        
        .admin-user-info {
            display: flex;
            align-items: center;
        }
        
        .admin-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #007bff;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .admin-username {
            font-weight: bold;
        }
        
        .admin-timestamp {
            color: #6c757d;
            font-size: 12px;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            text-align: center;
            transition: transform 0.3s, box-shadow 0.3s;
            border-top: 4px solid #007bff;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .stat-card.danger {
            border-top-color: #dc3545;
        }
        
        .stat-card.warning {
            border-top-color: #ffc107;
        }
        
        .stat-card.success {
            border-top-color: #28a745;
        }
        
        .stat-card.info {
            border-top-color: #17a2b8;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            margin: 10px 0;
            color: #343a40;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .admin-section {
            margin-bottom: 30px;
        }
        
        .admin-section-title {
            font-size: 18px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #dee2e6;
            color: #343a40;
        }
        
        .events-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .events-table th,
        .events-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #dee2e6;
            text-align: left;
        }
        
        .events-table th {
            background-color: #f8f9fa;
            font-weight: bold;
            color: #495057;
        }
        
        .events-table tr:hover {
            background-color: #f8f9fa;
        }
        
        .event-type {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .event-info {
            background-color: #cce5ff;
            color: #004085;
        }
        
        .event-warning {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .event-error {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .event-success {
            background-color: #d4edda;
            color: #155724;
        }
        
        .event-security {
            background-color: #d1ecf1;
            color: #0c5460;
        }
        
        .dna-security-visual {
            height: 200px;
            border-radius: 8px;
            margin-bottom: 20px;
            background-color: #212529;
            position: relative;
            overflow: hidden;
        }
        
        .security-level-indicator {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .security-level-bar {
            flex-grow: 1;
            height: 8px;
            background-color: #e9ecef;
            border-radius: 4px;
            margin: 0 10px;
            position: relative;
        }
        
        .security-level-fill {
            position: absolute;
            height: 100%;
            border-radius: 4px;
            background: linear-gradient(to right, #28a745, #007bff);
        }
        
        .security-level-text {
            font-weight: bold;
            min-width: 80px;
        }
        
        .security-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
        }
        
        .security-metric {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .metric-label {
            font-size: 12px;
            color: #6c757d;
            text-align: center;
        }
        
        .logout-btn {
            display: inline-block;
            padding: 8px 16px;
            background-color: #dc3545;
            color: white;
            border-radius: 4px;
            text-decoration: none;
            font-size: 14px;
            margin-left: 15px;
        }
        
        .logout-btn:hover {
            background-color: #c82333;
        }
        
        .dna-animation {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .security-breach-map {
            height: 300px;
            background-color: #212529;
            border-radius: 8px;
            margin-top: 20px;
            position: relative;
        }
        
        .map-point {
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #dc3545;
            box-shadow: 0 0 10px #dc3545;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(0.8);
                opacity: 0.8;
            }
            50% {
                transform: scale(1.2);
                opacity: 1;
            }
            100% {
                transform: scale(0.8);
                opacity: 0.8;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation with enhanced security and copyright protection -->
    <nav class="navbar">
        <div class="container">
            <a href="/" class="navbar-brand" data-copyright-protected="true">
                <span class="brand-text">Quantum</span><span class="brand-highlight">EDU</span>
            </a>
            <ul class="navbar-links">
                <li><a href="/" class="nav-link">Home</a></li>
                <li><a href="/quantum_basics" class="nav-link">Quantum Basics</a></li>
                <li><a href="/dna_security" class="nav-link">DNA Security</a></li>
                <li><a href="/quantum_algorithms" class="nav-link">Quantum Algorithms</a></li>
                <li><a href="/quantum_ml" class="nav-link">Quantum ML</a></li>
                <li><a href="/resources" class="nav-link">Resources</a></li>
                <li><a href="/admin" class="nav-link active">Admin</a></li>
            </ul>
        </div>
    </nav>
    
    <!-- Hidden copyright notice with quantum-enhanced protection -->
    <div class="hidden-copyright-watermark" style="display: none;">© 2025 Ervin Remus Radosavlevici (ervin210@icloud.com). All Rights Reserved Globally.</div>
    
    <!-- Main content -->
    <div class="container" data-copyright-protected="true" data-author="Ervin Remus Radosavlevici">
        <header class="page-header">
            <h1>Panou de Administrare</h1>
            <p class="copyright-notice">© 2025 Ervin Remus Radosavlevici (ervin210@icloud.com)</p>
            <p class="page-description">Monitorizare Securitate ADN-Cuantică & Protecție Drepturi de Autor</p>
        </header>
        
        <div class="admin-container">
            <div class="admin-header">
                <h2 class="admin-title">Monitorizare Sistem Securitate</h2>
                <div class="admin-user-info">
                    <div class="admin-avatar">{{ user[:1].upper() }}</div>
                    <div>
                        <div class="admin-username">{{ user }}</div>
                        <div class="admin-timestamp">Ultima actualizare: {{ now }}</div>
                    </div>
                    <a href="#" class="logout-btn" id="logout-btn">Deconectare</a>
                </div>
            </div>
            
            <div class="admin-stats">
                <div class="stat-card danger">
                    <div class="stat-label">Alerte Critice</div>
                    <div class="stat-value">{{ dna_stats.critical_alerts }}</div>
                    <div>Încercări de încălcare detectate</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-label">Avertismente</div>
                    <div class="stat-value">{{ dna_stats.warnings }}</div>
                    <div>Activități suspecte</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-label">Utilizatori Înregistrați</div>
                    <div class="stat-value">{{ dna_stats.registered_users }}</div>
                    <div>Conturi cu protecție ADN</div>
                </div>
                <div class="stat-card info">
                    <div class="stat-label">Simulări Cuantice</div>
                    <div class="stat-value">{{ dna_stats.quantum_simulations }}</div>
                    <div>Circuite simulate</div>
                </div>
            </div>
            
            <div class="admin-section">
                <h3 class="admin-section-title">Protecție Drepturi de Autor ADN-Cuantică</h3>
                
                <div class="dna-security-visual">
                    <div class="dna-animation" id="dna-visual"></div>
                </div>
                
                <div class="security-level-indicator">
                    <span class="security-level-text">Nivel Securitate:</span>
                    <div class="security-level-bar">
                        <div class="security-level-fill" style="width: {{ dna_stats.security_level_percent }}%;"></div>
                    </div>
                    <span class="security-level-text">{{ dna_stats.security_level }}/10</span>
                </div>
                
                <div class="security-metrics">
                    <div class="security-metric">
                        <div class="metric-value">{{ dna_stats.copyright_instances }}</div>
                        <div class="metric-label">Instanțe Protecție Copyright</div>
                    </div>
                    <div class="security-metric">
                        <div class="metric-value">{{ dna_stats.self_repair_count }}</div>
                        <div class="metric-label">Auto-Reparări DNA</div>
                    </div>
                    <div class="security-metric">
                        <div class="metric-value">{{ dna_stats.watermarks }}</div>
                        <div class="metric-label">Filigrane Steganografice</div>
                    </div>
                    <div class="security-metric">
                        <div class="metric-value">{{ dna_stats.security_checks }}</div>
                        <div class="metric-label">Verificări Securitate</div>
                    </div>
                </div>
            </div>
            
            <div class="admin-section">
                <h3 class="admin-section-title">Jurnal Evenimente Securitate</h3>
                
                <table class="events-table">
                    <thead>
                        <tr>
                            <th>Tip</th>
                            <th>Descriere</th>
                            <th>Utilizator</th>
                            <th>IP</th>
                            <th>Timestamp</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for event in security_events %}
                        <tr>
                            <td>
                                {% if 'ERROR' in event.event_type or 'CRITICAL' in event.event_type %}
                                <span class="event-type event-error">{{ event.event_type }}</span>
                                {% elif 'WARNING' in event.event_type %}
                                <span class="event-type event-warning">{{ event.event_type }}</span>
                                {% elif 'SUCCESS' in event.event_type %}
                                <span class="event-type event-success">{{ event.event_type }}</span>
                                {% elif 'SECURITY' in event.event_type %}
                                <span class="event-type event-security">{{ event.event_type }}</span>
                                {% else %}
                                <span class="event-type event-info">{{ event.event_type }}</span>
                                {% endif %}
                            </td>
                            <td>{{ event.description }}</td>
                            <td>{{ event.username if event.username else 'Anonim' }}</td>
                            <td>{{ event.ip_address if event.ip_address else '-' }}</td>
                            <td>{{ event.timestamp }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            
            <div class="admin-section">
                <h3 class="admin-section-title">Monitorizare Globală Încercări de Încălcare Copyright</h3>
                
                <div class="security-breach-map" id="breach-map">
                    <!-- Breach points will be dynamically added here -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Footer with copyright notice and security information -->
    <footer>
        <div class="footer-content">
            <div class="footer-copyright">
                <p>© 2025 Ervin Remus Radosavlevici (ervin210@icloud.com)</p>
                <p>All Rights Reserved Globally. Protected by International Copyright Law.</p>
            </div>
            <div class="footer-security">
                <p>Security Key: <span class="security-key">{{ security_key }}</span></p>
                <p>Enhanced with DNA-based quantum security</p>
            </div>
        </div>
    </footer>
    
    <!-- Security breach detection and self-repair JavaScript -->
    <script src="{{ url_for('static', filename='js/breach-detector.js') }}"></script>
    <script src="{{ url_for('static', filename='js/security.js') }}"></script>
    
    <!-- Custom JavaScript for admin dashboard -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Check for JWT token
            const token = localStorage.getItem('jwt_token');
            if (!token) {
                // Redirect to login if no token
                window.location.href = '/login?error=Autentificare necesară pentru a accesa panoul de administrare';
                return;
            }
            
            // DNA animation in security visual
            const dnaVisual = document.getElementById('dna-visual');
            if (dnaVisual) {
                // Apply copyright protection
                dnaVisual.setAttribute('data-copyright-protected', 'true');
                dnaVisual.setAttribute('data-author', 'Ervin Remus Radosavlevici');
                
                // Generate DNA helix
                const createDNAAnimation = () => {
                    dnaVisual.innerHTML = '';
                    const width = dnaVisual.offsetWidth;
                    const height = dnaVisual.offsetHeight;
                    
                    // Create DNA strands
                    const strandCount = 20;
                    for (let i = 0; i < strandCount; i++) {
                        const strand = document.createElement('div');
                        strand.style.position = 'absolute';
                        strand.style.width = '80%';
                        strand.style.height = '2px';
                        strand.style.left = '10%';
                        strand.style.top = `${i * (height / strandCount)}px`;
                        strand.style.backgroundColor = i % 2 === 0 ? '#007bff' : '#28a745';
                        strand.style.transform = `rotate(${Math.sin(i / 2) * 30}deg)`;
                        strand.style.transformOrigin = 'center';
                        strand.style.boxShadow = '0 0 5px rgba(0, 123, 255, 0.7)';
                        dnaVisual.appendChild(strand);
                        
                        // Animate each strand
                        const animateStrand = () => {
                            const rotation = Math.sin(Date.now() / 1000 + i) * 30;
                            strand.style.transform = `rotate(${rotation}deg)`;
                            requestAnimationFrame(animateStrand);
                        };
                        
                        animateStrand();
                    }
                    
                    // Add base pairs (connecting dots)
                    for (let i = 0; i < strandCount; i++) {
                        const basePair1 = document.createElement('div');
                        basePair1.style.position = 'absolute';
                        basePair1.style.width = '6px';
                        basePair1.style.height = '6px';
                        basePair1.style.borderRadius = '50%';
                        basePair1.style.backgroundColor = '#dc3545';
                        basePair1.style.left = `${width / 4}px`;
                        basePair1.style.top = `${i * (height / strandCount) + 2}px`;
                        dnaVisual.appendChild(basePair1);
                        
                        const basePair2 = document.createElement('div');
                        basePair2.style.position = 'absolute';
                        basePair2.style.width = '6px';
                        basePair2.style.height = '6px';
                        basePair2.style.borderRadius = '50%';
                        basePair2.style.backgroundColor = '#ffc107';
                        basePair2.style.left = `${3 * width / 4}px`;
                        basePair2.style.top = `${i * (height / strandCount) + 2}px`;
                        dnaVisual.appendChild(basePair2);
                    }
                };
                
                createDNAAnimation();
                
                // Update on resize
                window.addEventListener('resize', createDNAAnimation);
            }
            
            // Security breach map
            const breachMap = document.getElementById('breach-map');
            if (breachMap) {
                // Generate random breach points
                const breachCount = {{ dna_stats.breach_attempts }};
                
                for (let i = 0; i < breachCount; i++) {
                    const point = document.createElement('div');
                    point.className = 'map-point';
                    point.style.left = `${Math.random() * 90 + 5}%`;
                    point.style.top = `${Math.random() * 90 + 5}%`;
                    
                    // Set different colors for severity
                    const severity = Math.floor(Math.random() * 3);
                    if (severity === 0) {
                        point.style.backgroundColor = '#dc3545'; // High severity
                        point.style.boxShadow = '0 0 10px #dc3545';
                    } else if (severity === 1) {
                        point.style.backgroundColor = '#ffc107'; // Medium severity
                        point.style.boxShadow = '0 0 8px #ffc107';
                    } else {
                        point.style.backgroundColor = '#17a2b8'; // Low severity
                        point.style.boxShadow = '0 0 6px #17a2b8';
                    }
                    
                    breachMap.appendChild(point);
                }
            }
            
            // Logout functionality
            const logoutBtn = document.getElementById('logout-btn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Clear JWT token
                    localStorage.removeItem('jwt_token');
                    
                    // Redirect to login
                    window.location.href = '/login?success=V-ați deconectat cu succes';
                });
            }
        });
    </script>
</body>
</html>